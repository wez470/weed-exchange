<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">

<dom-module id="my-reviews">
  <template>
    <style>
      .content {
        margin: 0px 20px;
        display: flex;
        align-items: center;
        flex-direction: column;
      }
      paper-button.green {
        color: var(--app-secondary-color);;
        background-color: var(--app-primary-color);
      }
    </style>
    <div class="content">
      <h1>Search Cannabis Strain</h1>
      <paper-input value="{{searchString}}"></paper-input>
      <paper-button class="green" on-click="searchStrain">search</paper-button>
    </div>
  </template>

  <script>
      /**
       * @customElement
       * @polymer
       */
       class MyReviews extends Polymer.Element {
        static get is() { return 'my-reviews'; }

        static get properties() {
          return {
            searchString: String
          };
        }

        searchStrain() {
          console.log("Searching strain: " + this.searchString);
          var request = new XMLHttpRequest();
          request.open('GET', 'http://localhost:5000/weed-exchange/us-central1/helloWorld');
          request.responseType = 'text';

          request.onload = function() {
            console.log("XML");
            console.log(request.response);
          };

          request.send();

          fetch('http://localhost:5000/weed-exchange/us-central1/helloWorld').then(function(response) {
            response.text().then(function(text) {
              console.log("Fetch");
              console.log(text);
            });
          });
        }
      }
  
      window.customElements.define(MyReviews.is, MyReviews);
  </script>
</dom-module>